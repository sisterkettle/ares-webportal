{{page-title "Search Wiki"}}

<h1>Search Wiki</h1>

<SearchBar />

<hr>

{{#if this.searchResults}}
<a data-bs-toggle="collapse" href="#searchFields" class="btn btn-secondary btn-collapse">Show/Hide Search</a>
{{/if}}

<div id="searchFields" class="card-collapse collapse {{if this.searchResults '' 'show'}}">

<div class="form-item">
  
  <div class="form-item-label">
    <label>Title:</label>
  </div>
  
  <div class="form-item-entry">
        <p><Input @type="text" size={{25}} id="title" @value={{this.searchTitle}} @enter={{this.search}} /></p>
  </div>
  
</div>

<div class="form-item">
  
  <div class="form-item-label">
        <label>Tag:</label>
  </div>
  
  <div class="form-item-entry">
        <p><Input @type="text" size={{25}} id="tag" @value={{this.searchTag}} @enter={{this.search}} /></p>
  </div>
  
</div>

<div class="form-item">
  
  <div class="form-item-label">
    <label>Category:</label>
  </div>
  
  <div class="form-item-entry">
        <p><Input @type="text" size={{25}} id="category" @value={{this.searchCategory}} @enter={{this.search}} /></p>
  </div>
  
</div>

<div class="form-item">
  <div class="form-item-label">
    <label>Text:</label>
  </div>

  <div class="form-item-entry">
        <p><Input @type="text" size={{25}} id="text" @value={{this.searchText}} @enter={{this.search}} /></p>
  </div>
</div>  

    
<div class="action-buttons">
    <button class="btn btn-secondary" {{on 'click' this.reset}}>Reset</button>
    <button class="btn btn-primary" {{on 'click' this.search}}>Search</button>
</div>

<p class="search-hint">Search is case-insensitive and matches ALL specified criteria.</p>

</div>


<hr>

<FlashMessages />

{{#if this.searchResults}}

<ul>
{{#each this.searchResults as |page|}}
<li><LinkTo @route="wiki-page" @model={{page.id}}>{{page.heading}}</LinkTo></li>
{{/each}}
</ul>

{{else}}
<p>No search results.</p>
{{/if}}

{{outlet}}